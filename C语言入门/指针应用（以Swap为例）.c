/**
 * @brief 使用指针实现变量交换的演示程序
 * @details 
 * 此程序展示如何使用指针实现真正的变量交换，而非值的复制。
 * 在C语言中，函数参数是按值传递的，要修改调用者的变量，必须使用指针。
 * 
 */

#include <stdio.h>

/**
 * @brief 交换两个整型变量的值
 * @param a 指向第一个整型变量的指针
 * @param b 指向第二个整型变量的指针
 * 
 * 函数通过指针直接操作原始变量，而非它们的副本。
 * 这是C语言中实现真正变量交换的标准方法。
 */
void swap(int *a, int *b) {
    // 创建临时变量保存a指向的值
    int temp = *a;
    
    // 将b指向的值赋给a指向的地址
    *a = *b;
    
    // 将临时保存的值赋给b指向的地址
    *b = temp;
    
    /* 注意：如果直接交换指针本身（而不是指针指向的值），
       那么交换只会在函数内部有效，不会影响调用者的变量。
       例如：void swap(int *a, int *b) { int *temp = a; a = b; b = temp; }
       这种写法是错误的，因为它只交换了函数内部的指针副本。 */
}

/**
 * @brief 主函数，演示swap函数的使用
 * 
 * 程序展示交换前和交换后两个变量的值，
 * 验证swap函数确实修改了原始变量。
 */
int main() {
    int x = 10;
    int y = 20;
    
    printf("交换前: x = %d, y = %d\n", x, y);
    
    // 传递变量的地址给swap函数
    swap(&x, &y);
    
    printf("交换后: x = %d, y = %d\n", x, y);
    
    return 0;
}

/**
 * 关键概念解释：
 * 
 * 1. 为什么需要指针：
 *    C语言中函数参数传递是"按值传递"，即函数获得的是参数的副本。
 *    要修改原始变量，必须传递变量的地址（指针）。
 * 
 * 2. 解引用操作符(*)：
 *    *a 表示"访问a指针所指向地址存储的值"。
 *    通过解引用，我们可以读取或修改原始变量。
 * 
 * 3. 地址操作符(&)：
 *    &x 表示"获取变量x的内存地址"。
 *    这是将变量传递给期望指针参数的函数的方式。
 * 
 * 4. 错误示例分析：
 *    如果尝试不使用指针实现交换：
 *    void bad_swap(int a, int b) {
 *        int temp = a;
 *        a = b;
 *        b = temp;
 *    }
 *    这个函数只会交换它内部的副本，不会影响调用者的变量。
 */
