/**
 * @brief 指针基础概念与用法演示
 * @details 
 * 此程序用于演示指针的基本概念，包括：
 * 1. 指针的声明与初始化
 * 2. 地址操作符(&)与解引用操作符(*)
 * 3. 指针作为函数参数实现"按引用传递"
 * 4. 通过指针修改原始变量的值
 * 
 */

#include <stdio.h>

/* 函数声明 */
void f(int *p); // 接受一个整型指针作为参数
void g(int k);  // 接受一个整型值作为参数

/**
 * @brief 主函数，演示指针的基本用法
 * 
 * 程序展示了如何获取变量地址、传递指针给函数，
 * 以及如何通过指针修改原始变量的值。
 * 
 * @return int 程序退出状态码
 */
int main() {
    // 1. 变量声明与初始化
    int i = 6; // 声明一个整型变量i并初始化为6
    
    // 2. 获取变量地址并打印
    // &i 表示获取变量i的内存地址
    printf("&i = %p\n", (void*)&i); // 打印i的地址值 
    
    // 3. 将变量地址传递给函数f
    // 这里传递的是i的地址，而不是i的值
    f(&i);
    
    // 5. 调用函数g，传递i的值（不是地址）
    // 由于函数f通过指针修改了i的值，这里传递的是修改后的值
    g(i);
    
    return 0; 
} 

/**
 * @brief 通过指针接收并操作原始变量
 * 
 * 此函数接收一个整型指针，通过该指针可以：
 * 1. 访问指针所指向的地址
 * 2. 读取指针所指向地址存储的值
 * 3. 修改指针所指向地址存储的值
 * 
 * @param p 指向整型变量的指针
 */
void f(int *p) {
    // 打印指针p本身的值（即它保存的地址）
    printf("p = %p\n", (void*)p); 
    
    // 通过解引用操作符(*)访问指针指向的值
    printf("*p = %d \n", *p); // 读取原始变量i的值
    
    // 通过解引用操作符(*)修改指针指向的值
    // 这将直接修改main函数中变量i的值
    *p = 26; // 通过指针修改原始变量的值
    printf("After modification: *p = %d\n", *p);
}

/**
 * @brief 接收并打印一个整型值
 * 
 * 此函数接收的是变量的值，而不是地址。
 * 因此它对参数k的任何修改都不会影响原始变量。
 * 
 * @param k 整型值参数
 */
void g(int k) {
    // 打印参数k的值
    // 由于函数f通过指针修改了i的值，这里将打印修改后的值(26)
    printf("k = %d\n", k);
}

/**
 * 关键概念总结：
 * 
 * 1. 指针声明：
 *    int *p;  // 声明一个指向整型的指针
 *    (注意：星号(*)紧贴变量名，强调p是指针)
 * 
 * 2. 地址操作符(&):
 *    &variable  // 获取变量的内存地址
 * 
 * 3. 解引用操作符(*):
 *    *pointer   // 访问指针所指向地址存储的值
 * 
 * 4. 按值传递 vs. 按引用传递:
 *    - g(k):   按值传递，函数接收的是值的副本，修改不影响原始变量
 *    - f(&i):  按引用传递，函数接收的是变量的地址，可以通过指针修改原始变量
 * 
 * 5. 指针的优势:
 *    - 允许函数修改调用者的变量
 *    - 可以高效传递大型数据结构（避免复制整个结构）
 *    - 支持动态内存分配
 */
